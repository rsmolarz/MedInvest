{% extends "base.html" %}
{% block title %}Admin Analytics - MedInvest{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2 mb-0"><i class="fas fa-shield-alt me-2 text-danger"></i>Admin Dashboard</h1>
        <div class="d-flex flex-wrap gap-2">
            <a href="{{ url_for('admin.manage_users') }}" class="btn btn-outline-secondary">Users</a>
            <a href="{{ url_for('admin.verification_list') }}" class="btn btn-outline-warning">
                Verifications {% if stats.pending_verifications %}<span class="badge bg-warning text-dark">{{ stats.pending_verifications }}</span>{% endif %}
            </a>
            <a href="{{ url_for('admin.manage_deals') }}" class="btn btn-outline-secondary">Deals</a>
            <a href="{{ url_for('admin.manage_amas') }}" class="btn btn-outline-secondary">Spotlight</a>
            <a href="{{ url_for('admin.manage_courses') }}" class="btn btn-outline-secondary">Courses</a>
            <a href="{{ url_for('admin.manage_events') }}" class="btn btn-outline-secondary">Events</a>
            <a href="{{ url_for('admin.manage_rooms') }}" class="btn btn-outline-secondary">Rooms</a>
            <a href="{{ url_for('admin.manage_lti_tools') }}" class="btn btn-outline-info">LTI Tools</a>
            <a href="{{ url_for('admin.ads_dashboard') }}" class="btn btn-outline-success">Ads</a>
        </div>
    </div>
    
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h6 class="opacity-75">Total Users</h6>
                    <h2 class="mb-0">{{ stats.total_users }}</h2>
                    <small class="opacity-75">+{{ stats.new_users_week }} this week</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h6 class="opacity-75">Premium Users</h6>
                    <h2 class="mb-0">{{ stats.premium_users }}</h2>
                    <small class="opacity-75">{{ '{:.1f}'.format(stats.premium_rate) }}% conversion</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <h6 class="opacity-75">Total Posts</h6>
                    <h2 class="mb-0">{{ stats.total_posts }}</h2>
                    <small class="opacity-75">+{{ stats.posts_week }} this week</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning">
                <div class="card-body">
                    <h6 class="opacity-75">Monthly Revenue</h6>
                    <h2 class="mb-0">${{ '{:,.0f}'.format(stats.monthly_revenue) }}</h2>
                    <small class="opacity-75">estimated</small>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header"><h5 class="mb-0">Content Stats</h5></div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr><td>Active Deals</td><td class="text-end">{{ stats.active_deals }}</td></tr>
                        <tr><td>Pending Deals</td><td class="text-end"><span class="badge bg-warning">{{ stats.pending_deals }}</span></td></tr>
                        <tr><td>Upcoming AMAs</td><td class="text-end">{{ stats.upcoming_amas }}</td></tr>
                        <tr><td>Published Courses</td><td class="text-end">{{ stats.total_courses }}</td></tr>
                        <tr><td>Published Events</td><td class="text-end">{{ stats.total_events }}</td></tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header"><h5 class="mb-0">Quick Actions</h5></div>
                <div class="card-body">
                    <a href="{{ url_for('admin.manage_deals') }}" class="btn btn-outline-primary w-100 mb-2">
                        Review Pending Deals ({{ stats.pending_deals }})
                    </a>
                    <a href="{{ url_for('admin.manage_amas') }}" class="btn btn-outline-primary w-100 mb-2">Create New Spotlight Session</a>
                    <a href="{{ url_for('admin.manage_courses') }}" class="btn btn-outline-primary w-100 mb-2">Manage Courses</a>
                    <a href="{{ url_for('admin.manage_events') }}" class="btn btn-outline-primary w-100 mb-2">Manage Events</a>
                    <a href="{{ url_for('admin.manage_rooms') }}" class="btn btn-outline-primary w-100 mb-2">Manage Rooms</a>
                    <a href="{{ url_for('admin.manage_mentors') }}" class="btn btn-outline-success w-100 mb-2">Manage Mentors</a>
                    <a href="{{ url_for('admin.ads_dashboard') }}" class="btn btn-outline-warning w-100">Manage Ads</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
